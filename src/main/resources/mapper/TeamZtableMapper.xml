<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.company.springboot.demo.dao.TeamZTableMapper">
    <resultMap id="BaseResultMap" type="com.company.springboot.demo.dao.entity.TeamZtable">
        <id column="zzid" property="zzid" jdbcType="VARCHAR"/>
        <result column="kmid" property="kmid" jdbcType="VARCHAR" />
        <result column="ryid" property="ryid" jdbcType="VARCHAR" />
        <result column="swid" property="swid" jdbcType="VARCHAR" />
        <result column="zname" property="zname" jdbcType="VARCHAR" />
        <result column="status" property="status" jdbcType="VARCHAR" />
        <result column="del" property="del" jdbcType="VARCHAR" />
        <result column="created_by" property="createdBy" jdbcType="VARCHAR" />
        <result column="created_time" property="createdTime" jdbcType="TIMESTAMP" />
        <result column="updated_by" property="updatedBy" jdbcType="VARCHAR" />
        <result column="updated_time" property="updatedTime" jdbcType="TIMESTAMP" />
    </resultMap>

    <resultMap id="TeamzDo" type="com.company.springboot.demo.vo.TeamzVo">
        <result column="zname" property="zname" jdbcType="VARCHAR"/>
        <result column="kmName" property="kmName" jdbcType="VARCHAR"/>
        <result column="name" property="name" jdbcType="VARCHAR"/>
        <result column="zpronum" property="zpronum" jdbcType="VARCHAR"/>
        <result column="ztask" property="ztask" jdbcType="VARCHAR"/>
        <result column="status" property="status" jdbcType="VARCHAR"/>
    </resultMap>
    <update id="updatedel">
        update team_ztable set del = '0' where id = #{zzid}
    </update>


    <select id="teamlist" resultMap="TeamzDo">
SELECT
    te.zzid
	te.zname,
	su.kmname,
	ur. NAME,
	te.zpronum,
	co.ztask,
	te. STATUS
FROM
	team_ztable te
LEFT JOIN subject_table su ON te.kmid = su.kmid
LEFT JOIN user_table ur ON te.ryid = ur.ryid
LEFT JOIN task_ctable co ON te.rwcid = co.rwcid
where te.del = '1'
    </select>

    <select id="findByZzid" resultType="java.lang.String">
  select zzid
        from team_ztable
        where id = #{zzid}

    </select>


</mapper>